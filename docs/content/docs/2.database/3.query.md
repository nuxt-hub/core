---
title: Database Queries
description: Learn how to read and write data using Drizzle ORM in Nuxt, including filtering, joining, and aggregating relational data safely and efficiently.
navigation.title: Queries
---

Now that you have your database schema and migrations set up, you can start querying your database.

The `hub:db` module provides access to the database through a [Drizzle ORM](https://orm.drizzle.team) instance.

```ts
import { db } from 'hub:db'
```

::tip
`db` is auto-imported on server-side, you can directly use it without importing it from `hub:db`.
::

## SQL Select

```ts [server/api/users.get.ts]
import { db, schema } from 'hub:db'

export default eventHandler(async (event) => {
  return await db.query.users.findMany()
  // or
  return await db.select().from(schema.users)
})
```

::callout{to="https://orm.drizzle.team/docs/select" external}
Learn more about [Drizzle ORM select](https://orm.drizzle.team/docs/select) on the Drizzle documentation.
::

## SQL Insert

```ts [server/api/users.post.ts]
import { db, schema } from 'hub:db'

export default eventHandler(async (event) => {
  const { name, email } = await readBody(event)

  return await db
    .insert(schema.users)
    .values({
      name,
      email,
      createdAt: new Date()
    })
    .returning()
})
```

::callout{to="https://orm.drizzle.team/docs/insert" external}
Learn more about [Drizzle ORM insert](https://orm.drizzle.team/docs/insert) on the Drizzle documentation.
::

## SQL Update

```ts [server/api/users/[id\\].patch.ts]
import { db, schema } from 'hub:db'

export default eventHandler(async (event) => {
  const { id } = getRouterParams(event)
  const { name } = await readBody(event)

  return await db
    .update(schema.users)
    .set({ name })
    .where(eq(tables.users.id, Number(id)))
    .returning()
})
```

::callout{to="https://orm.drizzle.team/docs/update" external}
Learn more about [Drizzle ORM update](https://orm.drizzle.team/docs/update) on the Drizzle documentation.
::

## SQL Delete

```ts [server/api/users/[id\\].delete.ts]
import { db, schema } from 'hub:db'

export default eventHandler(async (event) => {
  const { id } = getRouterParams(event)

  const deletedUser = await db
    .delete(schema.users)
    .where(eq(schema.users.id, Number(id)))
    .returning()

  if (!deletedUser) {
    throw createError({
      statusCode: 404,
      message: 'User not found'
    })
  }

  return { deleted: true }
})
```

::callout{to="https://orm.drizzle.team/docs/delete" external}
Learn more about [Drizzle ORM delete](https://orm.drizzle.team/docs/delete) on the Drizzle documentation.
::
