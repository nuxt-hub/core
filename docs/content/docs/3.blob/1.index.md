---
title: Nuxt Blob Storage
description: Setup Blob Storage in your Nuxt application to store assets like images, videos, documents. Compatible with AWS S3, Cloudflare R2, Vercel Blob and more.
navigation.title: Setup
---

## Getting Started

::steps{level="3"}

### Enable blob storage

Enable blob storage in your project by setting `blob: true` in the NuxtHub config.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hub: {
    blob: true
  }
})
```

### Set a driver

NuxtHub automatically configures the blob storage driver based on your environment variables or hosting provider.

::note
By default, if NuxtHub cannot detect a driver, files are stored locally in the `.data/blob` directory.
::

::tabs{sync="blob-provider"}

  :::tabs-item{label="FS (default)" icon="i-simple-icons-nodedotjs"}
    To set the storage directory, you can set the `dir` option.

    ```ts [nuxt.config.ts]
    export default defineNuxtConfig({
      hub: {
        blob: {
          driver: 'fs',
          dir: '.data/my-blob-directory' // Defaults to `.data/blob`
        }
      }
    })
    ```

    ::important
      The local filesystem driver is not suitable for production environments.
    ::
  :::

  :::tabs-item{label="S3" icon="i-simple-icons-amazons3"}

    To configure [Amazon S3](https://aws.amazon.com/s3/) as a blob storage driver.

    1. Install the `aws4fetch` package
    
    :pm-install{name="aws4fetch"}

    2. Set the following environment variables:

    ```bash [.env]
    S3_ACCESS_KEY_ID=your-access-key-id
    S3_SECRET_ACCESS_KEY=your-secret-access-key
    S3_BUCKET=your-bucket-name
    S3_REGION=your-region
    S3_ENDPOINT=your-endpoint # (optional)
    ```
  :::
  :::tabs-item{label="Vercel Blob" icon="i-simple-icons-vercel"}

    When deploying to Vercel, it automatically configures [Vercel Blob Storage](https://vercel.com/docs/storage/vercel-blob).

    1. Install the `@vercel/blob` package

    :pm-install{name="@vercel/blob"}

    2. Assign a Vercel Blob Store to your project from the [Vercel dashboard](https://vercel.com/) -> Project -> Storage

    ::important
      Files stored in Vercel Blob are always public. Manually configure a different storage driver if storing sensitive files.
    ::

    3. When running locally, you can set the `BLOB_READ_WRITE_TOKEN` environment variable to enable the Vercel Blob driver:

    ```bash [.env]
    BLOB_READ_WRITE_TOKEN=your-token
    ```
  :::

  :::tabs-item{label="Cloudflare R2" icon="i-simple-icons-cloudflare"}

    When deploying to Cloudflare, it automatically configures [Cloudflare R2](https://developers.cloudflare.com/r2/).

    Add a `BLOB` binding to a [Cloudflare R2](https://developers.cloudflare.com/r2/) bucket in your `wrangler.jsonc` config.

    ```json [wrangler.jsonc]
    {
      "$schema": "node_modules/wrangler/config-schema.json",
      // ...
      "r2_buckets": [
        {
          "binding": "BLOB",
          "bucket_name": "<bucket_name>"
        }
      ]
    }
    ```

    Learn more about adding bindings on [Cloudflare's documentation](https://developers.cloudflare.com/r2/api/workers/workers-api-usage/).

    ::tip
      To use Cloudflare R2 without hosting on Cloudflare Workers, use the [Cloudflare R2 via S3 API](https://developers.cloudflare.com/r2/api/s3/api/).
    ::

  :::

::

### Upload a file

To upload a file, you can use the `blob.put()` method.

```ts
import { blob } from 'hub:blob'

const file = await blob.put('avatars/user-1.png', imageData)
```

::tip{to="/docs/blob/upload"}
Learn how to upload files with validation and progress tracking.
::

::

### Driver options

You can set a custom driver by providing a configuration object to `blob`.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hub: {
    blob: {
      driver: 'fs',
      dir: '.data/blob'
    }
  },
  // or overwrite only in production
  $production: {
    hub: {
      blob: {
        driver: 'vercel-blob'
      }
    }
  }
})
```

Available drivers:

::tabs{sync="blob-provider"}
  :::tabs-item{label="FS (default)" icon="i-simple-icons-nodedotjs"}
    ```ts
    export default defineNuxtConfig({
      hub: {
        blob: {
          driver: 'fs',
          dir: '.data/files' // defaults to '.data/blob'
        }
      }
    })
    ```
  :::
  :::tabs-item{label="S3" icon="i-simple-icons-amazons3"}
    ```ts
    export default defineNuxtConfig({
      hub: {
        blob: {
          driver: 's3',
          accessKeyId: 'your-access-key-id', // defaults to S3_ACCESS_KEY_ID
          secretAccessKey: 'your-secret-access-key', // defaults to S3_SECRET_ACCESS_KEY
          bucket: 'your-bucket-name', // defaults to S3_BUCKET
          region: 'your-region', // defaults to S3_REGION or 'auto'
          endpoint: 'your-endpoint' // optional, defaults to S3_ENDPOINT
        }
      }
    })
    ```
  :::
  :::tabs-item{label="Vercel Blob" icon="i-simple-icons-vercel"}
    ```ts
    export default defineNuxtConfig({
      hub: {
        blob: {
          driver: 'vercel-blob',
          token: 'your-token' // optional, defaults to BLOB_READ_WRITE_TOKEN env var
        }
      }
    })
    ```
  :::
  :::tabs-item{label="Cloudflare R2" icon="i-simple-icons-cloudflare"}
    ```ts
    export default defineNuxtConfig({
      hub: {
        blob: {
          driver: 'cloudflare-r2',
          binding: 'BLOB' // optional, defaults to 'BLOB'
        }
      }
    })
    ```
  :::
::

