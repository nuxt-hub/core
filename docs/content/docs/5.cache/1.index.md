---
title: Setup
description: Configure caching in your Nuxt application, including setup for pages, API routes, and serverless functions to improve performance and reduce load.
---

NuxtHub Cache automatically configures [Nitro's cache storage](https://nitro.build/guide/cache#customize-cache-storage). It allows you to cache API routes, server functions, and pages in your application.

::note
In development, you can inspect and manage cache entries from Nuxt DevTools (NuxtHub Cache tab). The UI is hosted on `https://hub.nuxt.com` and embedded as an iframe.
::

## Getting Started

Enable cache storage in your project by setting `cache: true` in the NuxtHub config.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hub: {
    cache: true
  }
})
```

## Cache vs KV

NuxtHub provides both Cache and KV storage. Understanding when to use each helps you make the right architectural decisions.

| Use Case | Recommendation |
| --- | --- |
| Response caching | **Cache** |
| API route caching | **Cache** |
| Computed data caching | **Cache** |
| User sessions | **KV** |
| Feature flags | **KV** |
| Rate limiting counters | **KV** |
| Persistent configuration | **KV** |

### When to Use Cache

Cache is ideal for data that can be recomputed and benefits from automatic expiration:

- **TTL-based expiration**: Cached data automatically expires after a specified duration
- **Response caching**: Use `cachedEventHandler` or `cachedFunction` for API responses
- **Computed data**: Cache expensive computations with automatic invalidation
- **No manual cleanup**: Expired entries are removed automatically

```ts [server/api/posts.ts]
export default cachedEventHandler(async () => {
  const posts = await fetchPosts()
  return posts
}, { maxAge: 60 * 60 }) // Cache for 1 hour
```

### When to Use KV

KV is designed for data that must persist until explicitly deleted:

- **Persistent data**: Information that should not expire automatically
- **Session storage**: User sessions and authentication tokens
- **Application state**: Feature flags and configuration values
- **Counters**: Rate limiting and analytics counters

```ts [server/api/session.ts]
import { kv } from 'hub:kv'

export default defineEventHandler(async (event) => {
  const sessionId = getCookie(event, 'session')
  const session = await kv.get(`sessions:${sessionId}`)
  return session
})
```

::tip
As a general rule, use **Cache** for data that can be recomputed, and use **KV** for data that must persist.
::

### Automatic Configuration

NuxtHub automatically configures the cache storage driver based on your hosting provider.

::tabs{sync="provider"}
  :::tabs-item{label="Vercel" icon="i-simple-icons-vercel" class="p-4"}
    When deploying to Vercel, it automatically configures [Vercel Runtime Cache](https://vercel.com/changelog/introducing-the-runtime-cache-api).

    No configuration is necessary to enable the Vercel Runtime Cache.
  :::

  :::tabs-item{label="Cloudflare" icon="i-simple-icons-cloudflare" class="p-4"}
    When deploying to Cloudflare, configure [Cloudflare Workers KV](https://developers.cloudflare.com/kv/) for caching by providing the namespace ID. NuxtHub auto-generates the wrangler bindings at build time.

    ```ts [nuxt.config.ts]
    export default defineNuxtConfig({
      hub: {
        cache: {
          driver: 'cloudflare-kv-binding',
          namespaceId: '<cache-namespace-id>'
        }
      }
    })
    ```

    ::callout{to="https://developers.cloudflare.com/kv/concepts/kv-bindings/"}
    Learn more about KV bindings on Cloudflare's documentation.
    ::
  :::

  :::tabs-item{label="Other" icon="i-simple-icons-nodedotjs" class="p-4"}

    When deploying to other providers, it automatically configures the [filesystem](https://unstorage.unjs.io/drivers/fs#nodejs-filesystem-lite).

    ::tip{to="#custom-driver"}
      You can configure the `cache` to use a different storage driver.
    ::

  :::
::


### Custom Driver

You can use any [unstorage](https://unstorage.unjs.io/drivers) driver by providing a configuration object to `cache`.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hub: {
    cache: {
      driver: 'redis',
      url: 'redis://localhost:6379'
    }
  }
})
```

::callout{to="https://unstorage.unjs.io/drivers"}
You can find the driver list on [unstorage documentation](https://unstorage.unjs.io/drivers) with their configuration.
::
