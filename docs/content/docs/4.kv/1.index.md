---
title: Setup
description: Set up Key-Value Storage in your Nuxt application, including installation, environment configuration, and connecting to your KV database.
---

NuxtHub Key Value Storage automatically configures [Nitro Storage](https://nitro.build/guide/storage), which is built on [unstorage](https://unstorage.unjs.io/).

## Getting Started

Enable the key-value storage in your NuxtHub project by adding the `kv` property to the `hub` object in your `nuxt.config.ts` file.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hub: {
    kv: true
  }
})
```

### Automatic Configuration

When building the Nuxt app, NuxtHub automatically configures the key-value storage driver on many providers.

::tabs{sync="provider"}
  :::tabs-item{label="Upstash" icon="i-simple-icons-upstash"}

    1. Install the `@upstash/redis` package

    :pm-install{name="@upstash/redis"}

    2. Set the `UPSTASH_REDIS_REST_URL` environment variable to your Upstash Redis REST URL.

    ```bash [.env]
    UPSTASH_REDIS_REST_URL=https://...
    UPSTASH_REDIS_REST_TOKEN=...
    ```

    ::tip
    When deploying to Vercel, we automatically detect if `KV_REST_API_URL` and `KV_REST_API_TOKEN` environment variables are set, and use them to configure the Upstash Redis connection.
    ::
  :::
  :::tabs-item{label="Redis" icon="i-simple-icons-redis"}

    1. Install the `ioredis` package

    :pm-install{name="ioredis"}

    2. Set the `REDIS_URL` environment variable to your Redis connection URL.
    ```bash [.env]
    REDIS_URL=redis://localhost:6379
    ```
    ::tip
    When deploying to Vercel, we automatically detect if `REDIS_URL` or `KV_URL` environment variable are set, and use one of them to configure the Redis connection.
    ::
  :::

  :::tabs-item{label="Cloudflare KV" icon="i-simple-icons-cloudflare"}

    When deploying to Cloudflare, configure [Cloudflare Workers KV](https://developers.cloudflare.com/kv/) by providing the namespace ID. NuxtHub auto-generates the wrangler bindings at build time.

    ```ts [nuxt.config.ts]
    export default defineNuxtConfig({
      hub: {
        kv: {
          driver: 'cloudflare-kv-binding',
          namespaceId: '<kv-namespace-id>'
        }
      }
    })
    ```

    ::callout{to="https://developers.cloudflare.com/kv/concepts/kv-bindings/"}
    Learn more about KV bindings on Cloudflare's documentation.
    ::

  :::

  :::tabs-item{label="Deno KV" icon="i-simple-icons-deno"}

    When deploying to Deno Deploy, it automatically configures [Deno KV](https://deno.com/kv).

  :::

  :::tabs-item{label="Other" icon="i-simple-icons-nodedotjs"}

    When deploying to other providers, Nitro Storage `kv` is configured to use the [filesystem](https://unstorage.unjs.io/drivers/fs#nodejs-filesystem-lite).

    ::tip{to="#manual-configuration"}
      You can manually configure the `kv` mount to use a different storage driver.
    ::

    Or directly set the `REDIS_URL` environment variable.

    ```bash [.env]
    REDIS_URL=redis://localhost:6379
    ```

  :::
::

::important
If no automatic configuration is found, it will default to [filesystem](https://unstorage.unjs.io/drivers/fs#nodejs-filesystem-lite) and store the data in the `.data/kv`.
::

### Manual Configuration

You can use any [unstorage](https://unstorage.unjs.io/drivers) driver by configuring the `hub.kv` option with a driver and its options.

::callout{to="https://unstorage.unjs.io/drivers"}
You can find the driver list on [unstorage documentation](https://unstorage.unjs.io/drivers) with their configuration.
::

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hub: {
    kv: {
      driver: 'redis',
      url: 'redis://localhost:6379',
      /* any additional driver options */
    }
  }
})
```

::callout{to="https://unstorage.unjs.io/drivers"}
You can find the driver list on [unstorage documentation](https://unstorage.unjs.io/drivers) with their configuration.
::
