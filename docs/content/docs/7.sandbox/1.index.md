---
title: Sandbox
description: Run isolated code execution in your Nuxt application using Vercel Sandbox or Cloudflare Sandbox.
navigation.title: Setup
---

NuxtHub Sandbox provides isolated code execution environments powered by [unagent](https://unagent.onmax.me). Execute untrusted or AI-generated code safely in ephemeral Linux VMs.

## Getting Started

::steps{level="3"}

### Enable sandbox

Enable sandbox in your project by setting `sandbox: true` in the NuxtHub config.

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hub: {
    sandbox: true
  }
})
```

### Install a provider SDK

NuxtHub automatically detects your hosting provider and configures the appropriate sandbox. Install the SDK for your provider:

::tabs{sync="sandbox-provider"}

  :::tabs-item{label="Vercel" icon="i-simple-icons-vercel"}

  :pm-install{name="@vercel/sandbox"}

  When deploying to Vercel, sandbox is automatically configured. For local development, set the `VERCEL_TOKEN` environment variable:

  ```bash [.env]
  VERCEL_TOKEN=your-vercel-token
  ```

  ::tip
  Run `vercel env pull` to automatically pull your development token.
  ::

  :::

  :::tabs-item{label="Cloudflare" icon="i-simple-icons-cloudflare"}

  :pm-install{name="@cloudflare/sandbox"}

  When deploying to Cloudflare Workers, sandbox is automatically configured.

  :::

::

### Use the sandbox

Create a sandbox instance and execute commands in your server routes:

```ts [server/api/sandbox.ts]
export default defineEventHandler(async () => {
  const sandbox = await useSandbox()

  const result = await sandbox.exec('node', ['-e', 'console.log("Hello from sandbox!")'])

  await sandbox.stop()

  return result
})
```

::

## Configuration

You can customize sandbox behavior by providing a configuration object:

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  hub: {
    sandbox: {
      provider: 'vercel', // 'vercel' | 'cloudflare'
      runtime: 'node24',  // Runtime environment
      timeout: 300000,    // Timeout in milliseconds
      memory: 2048,       // Memory allocation in MB
      cpu: 4              // CPU allocation
    }
  }
})
```

### Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `provider` | `'vercel' \| 'cloudflare'` | Auto-detected | Sandbox provider |
| `runtime` | `string` | `'node24'` (Vercel) | Runtime environment |
| `timeout` | `number` | `300000` | Timeout in milliseconds |
| `memory` | `number` | - | Memory allocation in MB |
| `cpu` | `number` | - | CPU allocation |

## API Reference

### useSandbox()

Creates a new sandbox instance.

```ts
const sandbox = await useSandbox(options?)
```

Returns a `Sandbox` object with the following methods:

| Method | Description |
|--------|-------------|
| `exec(command, args)` | Execute a command and return the result |
| `writeFile(path, content)` | Write content to a file in the sandbox |
| `readFile(path)` | Read a file from the sandbox |
| `stop()` | Stop and clean up the sandbox |

#### Example: Execute a Node.js script

```ts [server/api/run-script.ts]
export default defineEventHandler(async (event) => {
  const { code } = await readBody(event)

  const sandbox = await useSandbox()

  await sandbox.writeFile('/app/script.js', code)
  const result = await sandbox.exec('node', ['/app/script.js'])

  await sandbox.stop()

  return {
    success: result.ok,
    output: result.stdout,
    error: result.stderr
  }
})
```

### isSandboxAvailable()

Check if a sandbox provider SDK is installed.

```ts
if (isSandboxAvailable('vercel')) {
  // @vercel/sandbox is available
}
```

### detectSandbox()

Detect the current sandbox environment.

```ts
const { type, details } = detectSandbox()
// type: 'vercel' | 'cloudflare' | 'docker' | 'none'
```

## Use Cases

Sandbox is ideal for:

- **AI code execution**: Safely run AI-generated code
- **Code playgrounds**: Build interactive code editors
- **CI/CD pipelines**: Execute build scripts in isolation
- **Data processing**: Run untrusted data transformation scripts
